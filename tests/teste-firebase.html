<!DOCTYPE html>
<html>
<head>
    <title>Teste Firebase</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../public/assets/imgs/ui/icon-chave.png">
</head>
<body>
    <h1>Teste de Conex√£o Firebase</h1>
    <button onclick="testarConexao()">Testar Conex√£o</button>
    <button onclick="testarEscrita()">Testar Escrita</button>
    <button onclick="testarLeitura()">Testar Leitura</button>
    <div id="resultado"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Firebase Config -->
    <script src="../public/src/modules/shared/config/firebase-config.js"></script>
    
    <script>
        function log(message) {
            document.getElementById('resultado').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        function testarConexao() {
            log('üîç Testando conex√£o...');
            
            if (typeof firebase === 'undefined') {
                log('‚ùå Firebase n√£o carregado');
                return;
            }
            
            if (typeof database === 'undefined') {
                log('‚ùå Database n√£o inicializado');
                return;
            }
            
            log('‚úÖ Firebase carregado e database inicializado');
            
            // Testar se consegue criar refer√™ncia
            try {
                const ref = database.ref('teste');
                log('‚úÖ Refer√™ncia criada: ' + ref.toString());
            } catch (error) {
                log('‚ùå Erro ao criar refer√™ncia: ' + error);
            }
        }

        function testarEscrita() {
            log('üìù Testando escrita...');
            
            const testData = {
                timestamp: new Date().toISOString(),
                teste: 'dados de teste'
            };
            
            database.ref('teste').set(testData)
                .then(() => {
                    log('‚úÖ Escrita bem-sucedida!');
                })
                .catch(error => {
                    log('‚ùå Erro na escrita: ' + error);
                });
        }

        function testarLeitura() {
            log('üìñ Testando leitura...');
            
            database.ref('teste').once('value')
                .then(snapshot => {
                    const data = snapshot.val();
                    log('‚úÖ Leitura bem-sucedida: ' + JSON.stringify(data));
                })
                .catch(error => {
                    log('‚ùå Erro na leitura: ' + error);
                });
        }

        // Testar conex√£o automaticamente
        window.onload = function() {
            setTimeout(testarConexao, 1000);
        };
    </script>
</body>
</html>
